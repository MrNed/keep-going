var Obstacle=function(a,b,c){this.speed=c,this.posY=-80;var d=[.25,.5,.75];this.posX=d[a.rnd.between(0,2)];var e=a.add.bitmapData(40,40);e.ctx.rect(0,0,40,40),e.ctx.fillStyle="#FF895D",e.ctx.fill(),Phaser.Sprite.call(this,a,a.world.width*this.posX,this.posY,e),a.physics.arcade.enable(this),this.anchor.set(.5),this.body["static"]=!0,this.body.velocity.y=this.speed,b.add(this)};Obstacle.prototype=Object.create(Phaser.Sprite.prototype),Obstacle.prototype.constructor=Obstacle,Obstacle.prototype.update=function(){this.y-this.body.halfHeight>game.height&&this.destroy()},Obstacle.prototype.stop=function(){this.body.velocity.y=0};var Player=function(a,b,c){this.canMove=!0,this.pos=b;var d=a.add.bitmapData(20,20);d.ctx.rect(0,0,20,20),d.ctx.fillStyle="#00ADB5",d.ctx.fill(),Phaser.Sprite.call(this,a,a.world.width*this.pos,c,d),a.physics.arcade.enable(this),this.anchor.set(.5),this.body["static"]=!0,this.body.allowRotation=!1,this.body.moves=!1,a.world.add(this)};Player.prototype=Object.create(Phaser.Sprite.prototype),Player.prototype.constructor=Player,Player.prototype.move=function(){var a=game.input.x<game.world.centerX?"left":"right";if(this.canMove){if("left"===a&&.25!==this.pos)this.pos-=.25;else{if("right"!==a||.75===this.pos)return!1;this.pos+=.25}this.canMove=!1,this.moveTween=game.add.tween(this).to({x:game.world.width*this.pos},200,Phaser.Easing.Linear.None,!0),this.moveTween.onComplete.add(function(){this.canMove=!0},this)}},Player.prototype.hit=function(){this.canMove=!1,this.moveTween.stop()};var BasicGame={};BasicGame.Boot=function(){},BasicGame.Boot.prototype={init:function(){this.input.maxPointers=1,this.stage.disableVisibilityChange=!0},preload:function(){this.load.atlas("preloader","res/preloader.png","res/preloader.json")},create:function(){this.stage.backgroundColor="#393E46",this.state.start("Preload")}},BasicGame.Game=function(a){this.player=null,this.obstacles=null,this.obstacleSpeed=250,this.obstacleDelay=500,this.stop=!1},BasicGame.Game.prototype={init:function(a){this.config=a,game.renderer.roundPixels=!0,game.physics.startSystem(Phaser.Physics.ARCADE)},create:function(){var a=this;a.player=new Player(game,.5,game.world.height-50),a.obstacles=game.add.group(),game.time.events.loop(a.obstacleDelay,function(){new Obstacle(game,a.obstacles,a.obstacleSpeed)}),game.input.onDown.add(a.player.move,a.player)},update:function(){var a=this;game.physics.arcade.collide(a.player,a.obstacles,function(){game.time.events.stop(),a.player.hit(),a.obstacles.forEach(function(a){a.stop()})})},shutdown:function(){this.player=null,this.obstacles=null}},BasicGame.Menu=function(){},BasicGame.Menu.prototype={init:function(a){a||(a={}),this.config=a},create:function(){this.startClick()},update:function(){},startClick:function(){this.state.start("Game",!0,!1,this.config)}},BasicGame.Preload=function(){this.preloadBar=null,this.ready=!1},BasicGame.Preload.prototype={preload:function(){this.preloadBar=this.add.sprite(.5*game.width,.5*game.height,"preloader",0),this.preloadBar.anchor.set(.5,.5);var a=[],b=0;for(b;33>b;b++)a[b]=b;this.preloadBar.animations.add("loading",a,60,!0),this.preloadBar.play("loading"),this.load.onLoadComplete.addOnce(this.onLoadComplete,this)},create:function(){this.preloadBar.cropEnabled=!1},update:function(){this.state.start("Menu")},onLoadComplete:function(){this.ready=!0}};var game=new Phaser.Game(300,420,Phaser.Canvas,"game_cont");game.state.add("Boot",BasicGame.Boot),game.state.add("Preload",BasicGame.Preload),game.state.add("Menu",BasicGame.Menu),game.state.add("Game",BasicGame.Game),game.state.start("Boot");